<html ng-app="ficha">

<head>
    <link href="node_modules/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
    <link href="template/estilo.css" rel="stylesheet" />
    <title>Ficha Animal</title>
    <script src="node_modules/angular/angular.js"></script>
    <script src="js/app.js"></script>
    <script src="js/fichaCrtl.js"></script>
    <script src="js/fichaService.js"></script>
    <script src="js/dao.js"></script>
    <script src="js/animalService.js"></script>
</head>

<body ng-controller="fichaCrtl" class="container">
    <div ng-if="mostrarBuscaDeFichas">
        <div class="page-header">
            <h1 class="title">Lista de Fichas</h1>
        </div>
        <div>
            <form>
                <div class="form-group">
                    <label>Pesquisar por id</label>
                    <input type="text" class="form-control" placeholder="Id">
                </div>
                <div class="form-group">
                    <label>Período de inicio</label>
                    <input type="date" class="form-control">
                </div>
                <div class="form-group">
                    <label>Período de fim</label>
                    <input type="date" class="form-control">
                </div>
                <button type="submit" ng-click="buscar()" class="btn btn-primary">Buscar</button>
            </form>
        </div>
        <button ng-click="showCadastro()" type="submit" class="btn btn-primary">
            Adicionar ficha
        </button>
    </div>
    <div ng-if="mostrarCadastraFicha">
        <div class="page-header">
            <h1 class="title">Cadastrar Ficha</h1>
        </div>
        <form>
            <div class="form-group">
                <label>Data de Cadastro</label>
                <input ng-model="ficha.dataDeCadastro" type="date" class="form-control">
            </div>
            <div class="form-group">
                <div class="form-check">
                    <label class="form-check-label">
                        <input ng-model="ficha.status" value="Ativo" type="radio" class="form-check-input" name="status">Ativo
                    </label>
                </div>
                <div class="form-check">
                    <label class="form-check-label">
                        <input ng-model="ficha.status" value="Inativo" type="radio" class="form-check-input" name="status">Inativo
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label>Observação</label>
                <textarea ng-model="ficha.observacao" class="form-control"></textarea>
            </div>
            <div class="form-group">
                <label>Selecione os animais</label>
                <select class="form-control" ng-model="ficha.animais" multiple
                    ng-options="animal.nome for animal in animais track by animal.id">
                </select>
            </div>
            <button ng-click="salvar(ficha)" type="submit" class="btn btn-primary">Salvar</button>
            <button type="button" ng-click="cancelarCadastro()" class="btn btn-danger">Cancelar</button>
        </form>
    </div>
    <div ng-if="mostrarFichasCadastradas">
        <div class="page-header">
            <h1 class="title">Fichas Cadastradas</h1>
        </div>
        <table class="table">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Data de cadastro</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="ficha in fichas">
                    <td>
                        <span ng-bind="ficha.id"></span>
                    </td>
                    <td>
                        <span ng-bind="ficha.dataDeCadastro | date: 'dd/MM/yyyy'"></span>
                    </td>
                    <td>
                        <span ng-bind="ficha.status"></span>
                    </td>
                    <td>
                        <button type="button" ng-click="excluir(ficha)" class="btn btn-danger btn-sm">Excluir</button>
                        <button type="button" ng-click="editar(ficha)" class="btn btn-secondary btn-sm">Editar</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>

</html>